import{a as m,b as M}from"./chunk-DLTX3IJB.js";import{a as v}from"./chunk-GYCTBP6P.js";import{Ea as h,Fa as t,Ga as n,Ha as f,Ma as i,Na as s,Oa as l,Pa as c,bb as b,db as u,eb as C,fb as S,ka as a,pa as p,ta as x,va as g}from"./chunk-HIUE27M2.js";function y(d,e){if(d&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),l(7,"date"),n(),t(8,"td"),i(9),l(10,"date"),n()()),d&2){let o=e.$implicit,r=e.index;a(2),s(r+1),a(2),s(o.sox),a(2),s(c(7,4,o.fecha_hora,"yyyy-MM-dd")),a(3),s(c(10,7,o.fecha_hora,"HH:mm"))}}m.register(...M);var O=class d{constructor(e){this.SoxService=e}data=[];chart;avg=0;min=0;max=0;ngOnInit(){this.SoxService.getLatest(5).subscribe({next:e=>{this.data=e.reverse()},error:e=>console.error("Error al cargar \xFAltimos registros:",e)}),this.SoxService.getAll().subscribe({next:e=>{this.computeStats(e),this.loadChart(e)},error:e=>console.error("Error al cargar todos los registros:",e)})}computeStats(e){if(!e.length)return;let o=e.map(r=>r.sox);this.avg=o.reduce((r,_)=>r+_,0)/o.length,this.min=Math.min(...o),this.max=Math.max(...o)}loadChart(e){let o=document.getElementById("soxChart");o&&(this.chart&&this.chart.destroy(),this.chart=new m(o,{type:"line",data:{labels:e.map(r=>r.fecha_hora),datasets:[{label:"SOx",data:e.map(r=>r.sox),borderColor:"#2980b9",backgroundColor:"rgba(41, 128, 185, 0.2)",fill:!0,tension:.3}]},options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{display:!0},y:{display:!0}}}}))}static \u0275fac=function(o){return new(o||d)(p(v))};static \u0275cmp=x({type:d,selectors:[["app-sox"]],decls:40,vars:7,consts:[[1,"dashboard"],[1,"content"],[1,"records-section"],[1,"records-table"],[4,"ngFor","ngForOf"],[1,"stats-section"],[1,"stats"],[1,"card"],[1,"chart-section"],["id","soxChart"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"main",1)(2,"h1"),i(3,"\xD3xidos de Azufre (SOx)"),n(),t(4,"section",2)(5,"h2"),i(6,"\xDAltimos registros"),n(),t(7,"table",3)(8,"thead")(9,"tr")(10,"th"),i(11,"#"),n(),t(12,"th"),i(13,"SOx"),n(),t(14,"th"),i(15,"Fecha"),n(),t(16,"th"),i(17,"Hora"),n()()(),t(18,"tbody"),g(19,y,11,10,"tr",4),n()()(),t(20,"section",5)(21,"div",6)(22,"div",7)(23,"h3"),i(24,"Promedio"),n(),t(25,"p"),i(26),l(27,"number"),n()(),t(28,"div",7)(29,"h3"),i(30,"M\xEDnimo"),n(),t(31,"p"),i(32),n()(),t(33,"div",7)(34,"h3"),i(35,"M\xE1ximo"),n(),t(36,"p"),i(37),n()()()(),t(38,"section",8),f(39,"canvas",9),n()()()),o&2&&(a(19),h("ngForOf",r.data),a(7),s(c(27,4,r.avg,"1.1-2")),a(6),s(r.min),a(5),s(r.max))},dependencies:[S,b,C,u],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;min-height:100vh;font-family:Arial,sans-serif}.content[_ngcontent-%COMP%]{flex:1;padding:30px;background-color:#ecf0f1}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;font-size:26px;color:#2c3e50}.stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-bottom:40px}.card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;box-shadow:0 4px 6px #0000001a;text-align:center}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;color:#2980b9}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333}.records-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background-color:#fff;box-shadow:0 2px 6px #0000001a;border-radius:8px;overflow:hidden}.records-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .records-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 15px;text-align:left;border-bottom:1px solid #ddd}.records-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#2980b9;color:#fff;font-weight:700}.records-section[_ngcontent-%COMP%], .stats-section[_ngcontent-%COMP%]{margin-bottom:40px}.chart-section[_ngcontent-%COMP%]{margin-top:20px}"]})};export{O as SoxComponent};
